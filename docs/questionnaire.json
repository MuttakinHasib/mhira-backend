{
    "title": "JSON Schema for MHIRA Questionnaires YAML file",
    "description": "MHIRA Questionnaire YAML file linter",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "definitions": {
        "listItem": {
            "type": "object",
            "properties": {
                "value": {
                    "oneOf": [
                        { "type": "boolean" },
                        { "type": "number" },
                        { "type": "string" }
                    ]
                },
                "label": { "type": "string" },
                "shortcut": {
                    "description": "A single character key shortcut to select current choice.",
                    "type": "string",
                    "pattern": "^(.{1})$"
                },
                "sortOrder": { "type": "integer" }
            },
            "required": ["value", "label"],
            "additionalProperties": false
        },
        "list": {
            "type": "object",
            "properties": {
                "id": {
                    "title": "List ID",
                    "description": "An identifier for this list, unique to this questionnaire. Lower/Upper case characters with '.', '_' and '-' are allowed.",
                    "type": "string",
                    "pattern": "^([a-zA-Z0-9._-])+$"
                },
                "order": {
                    "title": "Sort Order",
                    "description": "Ordering pattern of list items. SORTED or RANDOM. Default to SORTED if no value supplied",
                    "enum": ["sorted", "random"],
                    "default": "sorted"
                },
                "items": {
                    "title": "List values",
                    "description": "Item values of this list",
                    "type": "array",
                    "items": { "$ref": "#/definitions/listItem" }
                }
            },
            "required": ["id", "items"],
            "additionalProperties": false
        },
        "question": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "pattern": "^([a-zA-Z0-9._-])+$",
                    "description": "An identifier for this question, unique to this questionnaire. Lower/Upper case characters with '.', '_' and '-' are allowed."
                },
                "type": {
                    "enum": [
                        "text",
                        "number",
                        "choice",
                        "checkbox",
                        "time",
                        "date"
                    ]
                },
                "text": { "type": "string" },
                "help": { "type": "string" },
                "isOptional": { "type": "boolean" },
                "isPersonalInformation": { "type": "boolean" },
                "options": { "type": "string" },
                "validationRules": { "type": "object" },
                "validationMessages": { "type": "object" }
            },
            "required": ["id", "type", "text"],
            "additionalProperties": false
        }
    },
    "properties": {
        "version": {
            "title": "Version number",
            "description": "Versioning Number",
            "type": "string",
            "pattern": "^([a-z0-9._-])+$"
        },
        "id": {
            "title": "Questionnaire ID",
            "description": "An identifier for this questionaire. Lower/Upper case characters with '.', '_' and '-' are allowed.",
            "type": "string",
            "pattern": "^([a-zA-Z0-9._-])+$"
        },
        "name": {
            "title": "Name",
            "description": "An Human readable identifier for this questionaire.",
            "type": "string",
            "pattern": "^(.{1,100})$"
        },
        "abbreviation": {
            "title": "Abbreviation",
            "description": "An short Human readable for this questionaire. Upper/Lower case characters, numbers with '.', '_' and '-' are allowed.",
            "type": "string",
            "pattern": "^([a-zA-Z0-9._-])+$"
        },
        "language": {
            "title": "ISO 639-1 Language Codes",
            "description": "A valid 2-digit ISO language code (ISO 639-1), or, an array of valid ISO codes.",
            "oneOf": [
                { "type": "string", "pattern": "^[A-Z]{2}$" },
                {
                    "type": "array",
                    "minItems": 1,
                    "items": { "type": "string", "pattern": "^[A-Z]{2}$" }
                }
            ]
        },
        "timeToComplete": { "type": "string" },
        "description": { "type": "string" },
        "copyright": { "type": "string" },
        "license": { "type": "string" },
        "website": { "type": "string" },
        "references": { "type": "array", "items": { "type": "string" } },
        "icd10": { "type": "string" },
        "localAdaptation": { "type": "string" },
        "screeningOrDiagnosis": { "type": "string" },
        "lists": { "type": "array", "items": { "$ref": "#/definitions/list" } },
        "questions": {
            "type": "array",
            "items": { "$ref": "#/definitions/question" }
        }
    },
    "required": ["version", "id", "name", "abbreviation"]
}
